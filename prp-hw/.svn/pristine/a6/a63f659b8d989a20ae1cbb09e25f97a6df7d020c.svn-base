#include <stdio.h>
#include <stdint.h>

#define loop while(1)

#define PRIME_LIMIT 1000000
typedef uint32_t prime_t;

#define SUCCESS 0
#define ERROR_INPUT 100
#define ERROR_DECOMPOSITION 110

prime_t find_primes(prime_t array[], prime_t limit)
{
    prime_t n_primes = 0;
    for(prime_t i = 0; i < limit; ++i) {
        array[i] = 1;
    }     
    for(prime_t i = 2; i < limit; ++i) {
        if (array[i]) {
            array[n_primes++] = i;
            for(prime_t j = i+i; j < limit; j+=i) {
                array[j] = 0;                 
            }
        }
    }     
    return n_primes;
}

uint64_t print_decomposition(uint64_t number, prime_t primes[], prime_t n_primes)
{
    printf("Prvociselny rozklad cisla %lu je:\n", number);

    if(number == 1) {
        printf("1\n");
        return 1;
    }
    
    for(int pi = 0; pi < n_primes && number > 1; ++pi) {
        prime_t prime = primes[pi];
        int power = 0;
        while (number % prime == 0) {
            power += 1;            
            number = number / prime;
        }

        if(power > 0)  {
            printf("%d", prime);            
            if(power > 1) {
                printf("^%d", power);
            }
            if(number > 1) {
                printf(" x ");
            }
        }
    } 
    putchar('\n');
    return number;
}

int main()
{
    prime_t primes[PRIME_LIMIT];
    prime_t n_primes = find_primes(primes, PRIME_LIMIT);
    
    loop {
        uint64_t number;
        if(scanf("%lu", &number) != 1 || number < 0) {
            fprintf(stderr, "Error: Chybny vstup!\n");
            return ERROR_INPUT;
        }
        if (number == 0) break;
        
        if(print_decomposition(number, primes, n_primes) > 1) {
            fprintf(stderr,
                "Error: Decomposition of %lu, contains a prime larger than %d\n",
                number, PRIME_LIMIT);
            return ERROR_DECOMPOSITION;
        }
    } 

    return SUCCESS;    
}